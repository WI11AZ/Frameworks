<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIZ2: OPM-ID ‚Üí Profils ECSF</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #2c3e50;
        }
        .wrapper {
            display: flex;
            min-height: 100vh;
        }
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #1e3a8a 0%, #1e40af 100%);
            color: white;
            padding: 25px;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.15);
        }
        .sidebar h2 {
            font-size: 0.95em;
            font-weight: 600;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            padding-bottom: 12px;
        }
        .category-section {
            margin-bottom: 24px;
        }
        .category-title {
            font-size: 0.85em;
            font-weight: 700;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            opacity: 0.9;
            padding-left: 4px;
        }
        .workrole-btn {
            display: flex;
            align-items: flex-start;
            width: 100%;
            padding: 10px 12px;
            margin-bottom: 6px;
            border: none;
            background: rgba(255,255,255,0.1);
            color: white;
            text-align: left;
            cursor: pointer;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: 500;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            gap: 10px;
        }
        .workrole-btn:hover {
            background: rgba(255,255,255,0.2);
            border-left-color: #60a5fa;
        }
        .workrole-btn.active {
            background: #3b82f6;
            border-left-color: #fbbf24;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        .workrole-btn .opm-id {
            display: inline-block;
            background: rgba(59, 130, 246, 0.3);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 700;
            white-space: nowrap;
            flex-shrink: 0;
            min-width: 45px;
            text-align: center;
        }
        .workrole-btn .workrole-title {
            flex: 1;
            line-height: 1.4;
            word-wrap: break-word;
        }
        .main-container {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            max-width: 1400px;
        }
        header {
            margin-bottom: 35px;
        }
        h1 {
            font-size: 2.2em;
            color: #1e3a8a;
            margin-bottom: 8px;
            font-weight: 700;
        }
        .subtitle {
            color: #64748b;
            font-size: 0.95em;
            font-weight: 400;
        }
        .search-section {
            margin-bottom: 35px;
            padding: 25px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }
        .search-label {
            display: block;
            font-weight: 600;
            margin-bottom: 12px;
            color: #495057;
            font-size: 0.95em;
        }
        #searchInput {
            width: 100%;
            padding: 12px 16px;
            font-size: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        #searchInput:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        .workroles-container {
            display: flex;
            flex-direction: column;
            gap: 28px;
            margin-bottom: 40px;
        }
        .workrole-card {
            background: white;
            border: 1px solid #cbd5e1;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }
        .workrole-card:hover {
            box-shadow: 0 12px 28px rgba(0,0,0,0.15);
            border-color: #3b82f6;
        }
        .card-header {
            padding: 16px 24px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            flex-wrap: wrap;
        }
        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            min-width: 0;
        }
        .opm-id {
            background: #3b82f6;
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 700;
            white-space: nowrap;
        }
        .header-title {
            font-size: 1.05em;
            color: #1e3a8a;
            font-weight: 600;
            flex: 1;
            min-width: 0;
        }
        .header-right {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        .score-badge {
            background: #10b981;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 700;
            white-space: nowrap;
        }
        .confidence-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 700;
            white-space: nowrap;
        }
        .confidence-high {
            background: #dcfce7;
            color: #15803d;
        }
        .confidence-medium {
            background: #fef3c7;
            color: #b45309;
        }
        .confidence-low {
            background: #fee2e2;
            color: #991b1b;
        }
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            border-collapse: collapse;
        }
        .grid-cell {
            padding: 16px 24px;
            border-right: 1px solid #e2e8f0;
            border-bottom: 1px solid #e2e8f0;
        }
        .grid-cell:nth-child(2n) {
            border-right: none;
        }
        .grid-cell:nth-last-child(-n+2) {
            border-bottom: none;
        }
        .grid-cell.empty {
            background: #fafbfc;
        }
        .cell-label {
            font-size: 0.7em;
            text-transform: uppercase;
            color: #94a3b8;
            font-weight: 700;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }
        .cell-value {
            font-size: 0.95em;
            color: #1e293b;
            font-weight: 500;
        }
        .category-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 14px;
            font-size: 0.8em;
            font-weight: 700;
            margin-right: 6px;
        }
        .cat-pd { background: #dbeafe; color: #0c4a6e; }
        .cat-dd { background: #f3e8ff; color: #581c87; }
        .cat-in { background: #dcfce7; color: #15803d; }
        .cat-og { background: #fed7aa; color: #92400e; }
        .cat-io { background: #fbcfe8; color: #831843; }
        .cat-ce { background: #e0e7ff; color: #3730a3; }
        .cat-ci { background: #fef3c7; color: #78350f; }
        .cat-na { background: #e2e8f0; color: #475569; }
        .profiles-section {
            padding: 20px 24px;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
        }
        .primary-profile-box {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            padding: 14px 16px;
            border-radius: 8px;
            border-left: 4px solid #0369a1;
            margin-bottom: 16px;
        }
        .profile-label {
            font-size: 0.7em;
            text-transform: uppercase;
            color: #0c4a6e;
            font-weight: 700;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .profile-name-score {
            color: #0c4a6e;
            font-weight: 700;
            font-size: 0.95em;
        }
        .secondary-title {
            font-size: 0.8em;
            text-transform: uppercase;
            color: #0369a1;
            font-weight: 700;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .secondary-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .secondary-item {
            padding: 8px 12px;
            background: white;
            border-left: 3px solid #0369a1;
            border-radius: 4px;
            font-size: 0.9em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .secondary-name {
            color: #1e293b;
            font-weight: 600;
        }
        .secondary-score {
            color: #0b5345;
            font-weight: 700;
            margin-left: 4px;
            white-space: nowrap;
        }
        .result-count {
            margin-bottom: 20px;
            font-size: 0.9em;
            color: #64748b;
            font-weight: 500;
        }
        .empty-state {
            text-align: center;
            padding: 80px 40px;
            color: #94a3b8;
        }
        .empty-state h3 {
            font-size: 1.4em;
            color: #64748b;
            margin-bottom: 12px;
        }
        .images-section {
            display: flex;
            gap: 20px;
            margin-bottom: 35px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .images-section img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .images-section img:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }
        .images-section img {
            flex: 1;
            min-width: 300px;
            max-width: 600px;
        }
        .image-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            cursor: pointer;
            animation: fadeIn 0.3s ease;
        }
        .image-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .image-modal-content {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            animation: zoomIn 0.3s ease;
        }
        .image-modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
            background: rgba(0,0,0,0.5);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }
        .image-modal-close:hover {
            background: rgba(0,0,0,0.8);
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes zoomIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        @media (max-width: 768px) {
            .info-grid {
                grid-template-columns: 1fr;
            }
            .grid-cell {
                border-right: none !important;
            }
            h1 { font-size: 1.8em; }
            .card-header {
                flex-direction: column;
                align-items: flex-start;
            }
            .header-right {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <aside class="sidebar">
            <h2>Work Roles par DCWF Community</h2>
            <div id="sidebarContainer"></div>
        </aside>

        <main class="main-container">
            <header>
                <h1>üîç Mapping Ontologique OPM-ID ‚Üí ECSF</h1>
                <p class="subtitle">VIZ 2 : Work Roles (OPM-ID) ‚Üí Profils ECSF</p>
            </header>

            <div class="images-section">
                <img src="Capture d'√©cran 2026-01-09 153200.png" alt="Image" class="zoomable-image">
            </div>

            <div id="imageModal" class="image-modal">
                <span class="image-modal-close">&times;</span>
                <img class="image-modal-content" id="modalImage" src="" alt="Image agrandie">
            </div>

            <div class="search-section">
                <label class="search-label">Rechercher par OPM-ID ou titre NCWF:</label>
                <input type="text" id="searchInput" placeholder="Ex: 212, Forensics, Digital Forensics..." />
            </div>

            <div id="resultCount" class="result-count"></div>
            <div id="workrolesContainer" class="workroles-container"></div>

            <div id="emptyState" class="empty-state" style="display: none;">
                <h3>‚ùå Aucun r√©sultat</h3>
                <p>Aucun work role ne correspond √† votre recherche</p>
            </div>
        </main>
    </div>

    <script>
        const allWorkroles = [{"OPM-ID": "111", "NCWF_Title": "All-Source Analysis", "NCWF_Category_Canonical": "CI", "NCWF_Category_Altern": "PD", "DCWF_Title": "All-Source Analyst", "DCWF_Community": "CI", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "120", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (48)", "Match_Reasoning": "Title: 'analysis'", "null": [" KSAT: 'intelligence' (29x)", " KSAT: 'threat' (16x)", " KSAT: 'analysis' (9x)"]}, {"OPM-ID": "112", "NCWF_Title": "Mission Assessment", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "PD", "DCWF_Title": "Mission Assessment Specialist", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cybersecurity Auditor", "Primary_ECSF_Profile": "Cybersecurity Auditor", "Primary_Score": "10", "Match_Confidence": "Low", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'assessment'"}, {"OPM-ID": "121", "NCWF_Title": "Exploitation Analysis", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "PD", "DCWF_Title": "Exploitation Analyst", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "36", "Match_Confidence": "Medium", "Secondary_Profiles": "Penetration Tester (28)", "Match_Reasoning": " Cybersecurity Implementer (20)", "null": [" Chief Information Security Officer (16)", "Title: 'analysis'", " KSAT: 'analysis' (8x)"]}, {"OPM-ID": "122", "NCWF_Title": "Digital Network Exploitation Analysis", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "PD", "DCWF_Title": "Digital Network Exploitation Analyst", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "160", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'analysis'", "null": [" KSAT: 'intelligence' (31x)", " KSAT: 'analysis' (37x)"]}, {"OPM-ID": "131", "NCWF_Title": "Target Analysis", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "PD", "DCWF_Title": "Joint Targeting Analyst", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "62", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'analysis'", "null": [" KSAT: 'intelligence' (16x)", " KSAT: 'analysis' (6x)"]}, {"OPM-ID": "132", "NCWF_Title": "Target Network Analysis", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "PD", "DCWF_Title": "Target Digital Network Analyst", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "140", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'analysis'", "null": [" KSAT: 'intelligence' (30x)", " KSAT: 'analysis' (30x)"]}, {"OPM-ID": "133", "NCWF_Title": "Target Reporting Analysis", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "PD", "DCWF_Title": "Target Analyst Reporter", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "140", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'analysis'", "null": [" KSAT: 'intelligence' (29x)", " KSAT: 'analysis' (29x)"]}, {"OPM-ID": "141", "NCWF_Title": "Threat Analysis", "NCWF_Category_Canonical": "PD", "NCWF_Category_Altern": "PD", "DCWF_Title": "Threat Analyst", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "178", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'threat analyst'", "null": [" Title: 'analysis'", " KSAT: 'intelligence' (23x)", " KSAT: 'threat' (20x)", " KSAT: 'analysis' (14x)"]}, {"OPM-ID": "151", "NCWF_Title": "Multi-Disciplined Language Analysis", "NCWF_Category_Canonical": "CI", "NCWF_Category_Altern": "PD", "DCWF_Title": "Multi-Disciplined Language Analyst", "DCWF_Community": "CI", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "62", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'analysis'", "null": [" KSAT: 'intelligence' (7x)", " KSAT: 'analysis' (15x)"]}, {"OPM-ID": "211", "NCWF_Title": "Digital Evidence Analysis", "NCWF_Category_Canonical": "IN", "NCWF_Category_Altern": "IN", "DCWF_Title": "Forensics Analyst", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Digital Forensics Investigator", "Primary_ECSF_Profile": "Digital Forensics Investigator", "Primary_Score": "266", "Match_Confidence": "High", "Secondary_Profiles": "Cyber Threat Intelligence Specialist (104)", "Match_Reasoning": "Title: 'forensics'", "null": [" Title: 'evidence'", " Title: 'digital evidence'", " KSAT: 'forensics' (17x)", " KSAT: 'evidence' (39x)"]}, {"OPM-ID": "212", "NCWF_Title": "Digital Forensics", "NCWF_Category_Canonical": "PD", "NCWF_Category_Altern": "IN", "DCWF_Title": "Digital Forensics Analyst", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Digital Forensics Investigator", "Primary_ECSF_Profile": "Digital Forensics Investigator", "Primary_Score": "300", "Match_Confidence": "High", "Secondary_Profiles": "Cyber Threat Intelligence Specialist (132)", "Match_Reasoning": "Title: 'forensics'", "null": [" Title: 'digital forensics'", " KSAT: 'forensics' (20x)", " KSAT: 'evidence' (37x)", " KSAT: 'forensic' (43x)"]}, {"OPM-ID": "221", "NCWF_Title": "Cybercrime Investigation", "NCWF_Category_Canonical": "IN", "NCWF_Category_Altern": "PD", "DCWF_Title": "Cyber Crime Investigator", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Digital Forensics Investigator", "Primary_ECSF_Profile": "Digital Forensics Investigator", "Primary_Score": "116", "Match_Confidence": "High", "Secondary_Profiles": "Cyber Threat Intelligence Specialist (62)", "Match_Reasoning": " Cyber Legal, Policy & Compliance Officer (38)", "null": ["Title: 'investigation'", " Title: 'crime'", " KSAT: 'investigation' (8x)", " KSAT: 'evidence' (30x)", " KSAT: 'crime' (10x)"]}, {"OPM-ID": "311", "NCWF_Title": "All-Source Collection Management", "NCWF_Category_Canonical": "CI", "NCWF_Category_Altern": "PD", "DCWF_Title": "All-Source Collection Manager", "DCWF_Community": "CI", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "96", "Match_Confidence": "High", "Secondary_Profiles": "Chief Information Security Officer (44)", "Match_Reasoning": "Title: 'CTI'", "null": [" KSAT: 'intelligence' (10x)", " KSAT: 'actor' (8x)"]}, {"OPM-ID": "312", "NCWF_Title": "All-Source Collection Requirements Management", "NCWF_Category_Canonical": "CI", "NCWF_Category_Altern": "PD", "DCWF_Title": "All-Source Collection Requirements Manager", "DCWF_Community": "CI", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "82", "Match_Confidence": "High", "Secondary_Profiles": "Chief Information Security Officer (48)", "Match_Reasoning": "Title: 'CTI'", "null": [" KSAT: 'intelligence' (6x)"]}, {"OPM-ID": "321", "NCWF_Title": "Cyberspace Network Operations", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "IN", "DCWF_Title": "(CyberSpace) Access Network Operator", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Penetration Tester", "Primary_ECSF_Profile": "Penetration Tester", "Primary_Score": "20", "Match_Confidence": "Low", "Secondary_Profiles": "Cyber Threat Intelligence Specialist (12)", "Match_Reasoning": " Cybersecurity Architect (10)", "null": [" Cybersecurity Risk Manager (10)", ""]}, {"OPM-ID": "322", "NCWF_Title": "Cyberspace Operations", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "IO", "DCWF_Title": "Cyberspace Operator", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_Score": "36", "Match_Confidence": "Medium", "Secondary_Profiles": "Cyber Threat Intelligence Specialist (30)", "Match_Reasoning": " Penetration Tester (28)", "null": [" Cybersecurity Implementer (18)", "KSAT: 'risk' (6x)", " KSAT: 'vulnerability' (6x)"]}, {"OPM-ID": "331", "NCWF_Title": "Cyber Intelligence Planning", "NCWF_Category_Canonical": "CI", "NCWF_Category_Altern": "PD", "DCWF_Title": "Cyber Intelligence Planner", "DCWF_Community": "CI", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "142", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "KSAT: 'intelligence' (56x)", "null": [" KSAT: 'threat' (9x)"]}, {"OPM-ID": "332", "NCWF_Title": "Cyber Operations Planning", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "PD", "DCWF_Title": "Cyber Operations Planner", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "38", "Match_Confidence": "Medium", "Secondary_Profiles": "Cybersecurity Architect (14)", "Match_Reasoning": " Cybersecurity Implementer (14)", "null": [" Cybersecurity Risk Manager (12)", "KSAT: 'intelligence' (14x)"]}, {"OPM-ID": "333", "NCWF_Title": "Partner Integration Planning", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "OG", "DCWF_Title": "Partner Integration Planner", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_Score": "10", "Match_Confidence": "Low", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'integration'"}, {"OPM-ID": "341", "NCWF_Title": "Cyberspace Capability Development", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "DD", "DCWF_Title": "Cyberspace Capability Developer", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_Score": "116", "Match_Confidence": "High", "Secondary_Profiles": "Cyber Threat Intelligence Specialist (46)", "Match_Reasoning": "Title: 'developer'", "null": [" Title: 'development'", " KSAT: 'development' (15x)", " KSAT: 'engineer' (10x)"]}, {"OPM-ID": "411", "NCWF_Title": "Technical Support", "NCWF_Category_Canonical": "IO", "NCWF_Category_Altern": "IO", "DCWF_Title": "Technical Support Specialist", "DCWF_Community": "IT", "Business_Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_ECSF_Profile": "Cyber Incident Responder", "Primary_Score": "42", "Match_Confidence": "Medium", "Secondary_Profiles": "Chief Information Security Officer (24)", "Match_Reasoning": " Cyber Threat Intelligence Specialist (18)", "null": [" Cybersecurity Architect (16)", "KSAT: 'incident' (16x)"]}, {"OPM-ID": "421", "NCWF_Title": "Database Administration", "NCWF_Category_Canonical": "IO", "NCWF_Category_Altern": "IO", "DCWF_Title": "Database Administrator", "DCWF_Community": "IT", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "66", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "KSAT: 'management' (33x)"}, {"OPM-ID": "422", "NCWF_Title": "Data Analysis", "NCWF_Category_Canonical": "IO", "NCWF_Category_Altern": "IO", "DCWF_Title": "Data Analyst", "DCWF_Community": "DA", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "42", "Match_Confidence": "Medium", "Secondary_Profiles": "Chief Information Security Officer (18)", "Match_Reasoning": " Cyber Legal, Policy & Compliance Officer (16)", "null": ["Title: 'analysis'", " KSAT: 'analysis' (13x)"]}, {"OPM-ID": "423", "NCWF_Title": "Data Science", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "IO", "DCWF_Title": "Data Scientist", "DCWF_Community": "DA", "Business_Primary_ECSF_Profile": "Cybersecurity Researcher", "Primary_ECSF_Profile": "Cybersecurity Researcher", "Primary_Score": "60", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'scientist'"}, {"OPM-ID": "424", "NCWF_Title": "Data Management", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "IO", "DCWF_Title": "Data Steward", "DCWF_Community": "DA", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "14", "Match_Confidence": "Low", "Secondary_Profiles": "Cyber Legal, Policy & Compliance Officer (10)", "Match_Reasoning": "Title: 'management'"}, {"OPM-ID": "431", "NCWF_Title": "Knowledge Management", "NCWF_Category_Canonical": "IO", "NCWF_Category_Altern": "IO", "DCWF_Title": "Knowledge Manager", "DCWF_Community": "IT", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "58", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (18)", "Match_Reasoning": "Title: 'management'", "null": [" KSAT: 'management' (18x)"]}, {"OPM-ID": "441", "NCWF_Title": "Network Operations", "NCWF_Category_Canonical": "IO", "NCWF_Category_Altern": "IO", "DCWF_Title": "Network Operations Specialist", "DCWF_Community": "IT", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "30", "Match_Confidence": "Medium", "Secondary_Profiles": "Cybersecurity Architect (26)", "Match_Reasoning": " Cybersecurity Implementer (20)", "null": [" Cybersecurity Risk Manager (16)", "KSAT: 'management' (15x)"]}, {"OPM-ID": "442", "NCWF_Title": "Network Technics", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "DD", "DCWF_Title": "Network Technician", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_Score": "48", "Match_Confidence": "Medium", "Secondary_Profiles": "Chief Information Security Officer (32)", "Match_Reasoning": " Cybersecurity Risk Manager (28)", "null": [" Cyber Incident Responder (26)", "KSAT: 'architecture' (10x)", " KSAT: 'design' (12x)"]}, {"OPM-ID": "443", "NCWF_Title": "Network Analysis", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "PD", "DCWF_Title": "Network Analyst", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "66", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (64)", "Match_Reasoning": " Cybersecurity Architect (58)", "null": [" Chief Information Security Officer (48)", "Title: 'analysis'", " KSAT: 'threat' (8x)", " KSAT: 'analysis' (15x)"]}, {"OPM-ID": "451", "NCWF_Title": "Systems Administration", "NCWF_Category_Canonical": "IO", "NCWF_Category_Altern": "PD", "DCWF_Title": "System Administrator", "DCWF_Community": "IT", "Business_Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_Score": "32", "Match_Confidence": "Medium", "Secondary_Profiles": "Chief Information Security Officer (24)", "Match_Reasoning": " Cyber Incident Responder (24)", "null": [" Cybersecurity Architect (24)", "KSAT: 'engineer' (10x)"]}, {"OPM-ID": "461", "NCWF_Title": "Systems Security Analysis ", "NCWF_Category_Canonical": "IO", "NCWF_Category_Altern": "DD", "DCWF_Title": "Systems Security Analyst", "DCWF_Community": "SE", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "80", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Architect (70)", "Match_Reasoning": " Cybersecurity Risk Manager (62)", "null": [" Cybersecurity Implementer (38)", "KSAT: 'management' (35x)"]}, {"OPM-ID": "462", "NCWF_Title": "Control Systems Security", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "PD", "DCWF_Title": "Control Systems Security Specialist", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_Score": "38", "Match_Confidence": "Medium", "Secondary_Profiles": "Chief Information Security Officer (22)", "Match_Reasoning": " Cybersecurity Auditor (14)", "null": ["KSAT: 'risk' (12x)"]}, {"OPM-ID": "463", "NCWF_Title": "Hosting Analysis", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "PD", "DCWF_Title": "Host Analyst", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "56", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (46)", "Match_Reasoning": " Cybersecurity Architect (44)", "null": [" Chief Information Security Officer (42)", "Title: 'analysis'", " KSAT: 'analysis' (13x)"]}, {"OPM-ID": "511", "NCWF_Title": "Defensive Cybersecurity", "NCWF_Category_Canonical": "PD", "NCWF_Category_Altern": "PD", "DCWF_Title": "Cyber Defense Analyst", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "98", "Match_Confidence": "High", "Secondary_Profiles": "Cyber Incident Responder (92)", "Match_Reasoning": " Cybersecurity Risk Manager (84)", "null": [" Penetration Tester (44)", "KSAT: 'threat' (17x)", " KSAT: 'analysis' (27x)"]}, {"OPM-ID": "521", "NCWF_Title": "Infrastructure Support", "NCWF_Category_Canonical": "PD", "NCWF_Category_Altern": "PD", "DCWF_Title": "Cyber Defense Infrastructure Support Specialist", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_ECSF_Profile": "Cyber Incident Responder", "Primary_Score": "36", "Match_Confidence": "Medium", "Secondary_Profiles": "Cybersecurity Architect (28)", "Match_Reasoning": " Cybersecurity Risk Manager (24)", "null": [" Cyber Legal, Policy & Compliance Officer (14)", "KSAT: 'incident' (7x)"]}, {"OPM-ID": "531", "NCWF_Title": "Incident Response", "NCWF_Category_Canonical": "PD", "NCWF_Category_Altern": "PD", "DCWF_Title": "Cyber Defense Incident Responder", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Cyber Incident Responder", "Primary_ECSF_Profile": "Cyber Incident Responder", "Primary_Score": "158", "Match_Confidence": "High", "Secondary_Profiles": "Cyber Threat Intelligence Specialist (68)", "Match_Reasoning": " Cybersecurity Risk Manager (56)", "null": ["Title: 'incident response'", " KSAT: 'incident' (31x)", " KSAT: 'response' (12x)", " KSAT: 'detection' (7x)"]}, {"OPM-ID": "541", "NCWF_Title": "Vulnerability Analysis", "NCWF_Category_Canonical": "PD", "NCWF_Category_Altern": "OG", "DCWF_Title": "Vulnerability Assessment Analyst", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_Score": "82", "Match_Confidence": "High", "Secondary_Profiles": "Cyber Threat Intelligence Specialist (56)", "Match_Reasoning": " Penetration Tester (48)", "null": [" Cybersecurity Auditor (44)", "Title: 'vulnerability assessment'", " KSAT: 'risk' (10x)", " KSAT: 'assessment' (6x)", " KSAT: 'vulnerability' (6x)", " KSAT: 'threat' (14x)"]}, {"OPM-ID": "551", "NCWF_Title": "Red Teaming", "NCWF_Category_Canonical": "CE", "NCWF_Category_Altern": "DD", "DCWF_Title": "Red Team Specialist", "DCWF_Community": "CE", "Business_Primary_ECSF_Profile": "Penetration Tester", "Primary_ECSF_Profile": "Penetration Tester", "Primary_Score": "72", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (48)", "Match_Reasoning": " Cyber Threat Intelligence Specialist (36)", "null": ["Title: 'red team'"]}, {"OPM-ID": "611", "NCWF_Title": "Systems Authorization", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "PD", "DCWF_Title": "Authorizing Official/Designated Representative", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_Score": "98", "Match_Confidence": "High", "Secondary_Profiles": "Cyber Legal, Policy & Compliance Officer (52)", "Match_Reasoning": " Chief Information Security Officer (44)", "null": [" Cybersecurity Architect (36)", "KSAT: 'risk' (30x)", " KSAT: 'assessment' (9x)", " KSAT: 'threat' (7x)"]}, {"OPM-ID": "612", "NCWF_Title": "Security Control Assessment", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "OG", "DCWF_Title": "Security Control Assessor", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Cybersecurity Auditor", "Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_Score": "118", "Match_Confidence": "High", "Secondary_Profiles": "Cyber Threat Intelligence Specialist (76)", "Match_Reasoning": " Cyber Legal, Policy & Compliance Officer (62)", "null": [" Chief Information Security Officer (58)", "KSAT: 'risk' (31x)", " KSAT: 'assessment' (12x)", " KSAT: 'vulnerability' (9x)", " KSAT: 'threat' (6x)"]}, {"OPM-ID": "621", "NCWF_Title": "Secure Software Development", "NCWF_Category_Canonical": "DD", "NCWF_Category_Altern": "IO", "DCWF_Title": "Software Developer", "DCWF_Community": "SE", "Business_Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_Score": "102", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Architect (94)", "Match_Reasoning": " Cybersecurity Risk Manager (64)", "null": [" Cyber Threat Intelligence Specialist (58)", "Title: 'developer'", " Title: 'development'", " KSAT: 'development' (14x)", " KSAT: 'engineer' (6x)"]}, {"OPM-ID": "622", "NCWF_Title": "Software Security Assessment", "NCWF_Category_Canonical": "DD", "NCWF_Category_Altern": "OG", "DCWF_Title": "Software Security Assessment Specialist", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_Score": "66", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Architect (62)", "Match_Reasoning": " Penetration Tester (60)", "null": [" Cyber Threat Intelligence Specialist (56)", "KSAT: 'risk' (17x)", " KSAT: 'threat' (9x)"]}, {"OPM-ID": "623", "NCWF_Title": "AI/ML Design", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "PD", "DCWF_Title": "AI/ML Specialist", "DCWF_Community": "DA", "Business_Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_Score": "56", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (22)", "Match_Reasoning": "Title: 'design'", "null": [" KSAT: 'design' (10x)", " KSAT: 'solution' (13x)"]}, {"OPM-ID": "624", "NCWF_Title": "Data Operations", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "IO", "DCWF_Title": "Data Operations Specialist", "DCWF_Community": "DA", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "10", "Match_Confidence": "Low", "Secondary_Profiles": "Cyber Legal, Policy & Compliance Officer (6)", "Match_Reasoning": " Cyber Incident Responder (4)", "null": [" Cyber Threat Intelligence Specialist (4)", ""]}, {"OPM-ID": "625", "NCWF_Title": "Product  & User Interface Design (UI)", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "DD", "DCWF_Title": "Product Designer User Interface (UI)", "DCWF_Community": "SE", "Business_Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_Score": "76", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'designer'", "null": [" Title: 'design'", " KSAT: 'design' (7x)"]}, {"OPM-ID": "626", "NCWF_Title": "Service & User Experience Design (UX)", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "DD", "DCWF_Title": "Service Designer User Experience (UX)", "DCWF_Community": "SE", "Business_Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_Score": "76", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'designer'", "null": [" Title: 'design'", " KSAT: 'design' (6x)"]}, {"OPM-ID": "627", "NCWF_Title": "DevSecOps", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "DD", "DCWF_Title": "DevSecOps Specialist", "DCWF_Community": "SE", "Business_Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_Score": "86", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (40)", "Match_Reasoning": " Penetration Tester (40)", "null": ["Title: 'DevSecOps'", " KSAT: 'integration' (8x)"]}, {"OPM-ID": "628", "NCWF_Title": "Software/Cloud Architecture", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "DD", "DCWF_Title": "Software/Cloud Architect", "DCWF_Community": "SE", "Business_Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_Score": "112", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'architect'", "null": [" Title: 'architecture'", " KSAT: 'architecture' (11x)", " KSAT: 'design' (12x)"]}, {"OPM-ID": "631", "NCWF_Title": "Secure Systems Development", "NCWF_Category_Canonical": "DD", "NCWF_Category_Altern": "DD", "DCWF_Title": "Information Systems Security Developer", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_Score": "158", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Implementer (140)", "Match_Reasoning": " Cybersecurity Risk Manager (94)", "null": [" Chief Information Security Officer (68)", "KSAT: 'architecture' (20x)", " KSAT: 'design' (54x)"]}, {"OPM-ID": "632", "NCWF_Title": "Secure Systems Development", "NCWF_Category_Canonical": "DD", "NCWF_Category_Altern": "DD", "DCWF_Title": "Systems Developer", "DCWF_Community": "IT", "Business_Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_Score": "94", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Architect (66)", "Match_Reasoning": "Title: 'developer'", "null": [" Title: 'development'", " KSAT: 'development' (7x)", " KSAT: 'engineer' (6x)"]}, {"OPM-ID": "641", "NCWF_Title": "Systems Requirements Planning", "NCWF_Category_Canonical": "DD", "NCWF_Category_Altern": "IO", "DCWF_Title": "Systems Requirements Planner", "DCWF_Community": "IT", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "68", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Architect (62)", "Match_Reasoning": " Cyber Threat Intelligence Specialist (54)", "null": [" Cybersecurity Risk Manager (40)", "KSAT: 'management' (29x)"]}, {"OPM-ID": "651", "NCWF_Title": "Enterprise Architecture", "NCWF_Category_Canonical": "DD", "NCWF_Category_Altern": "DD", "DCWF_Title": "Enterprise Architect", "DCWF_Community": "IT", "Business_Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_Score": "210", "Match_Confidence": "High", "Secondary_Profiles": "Chief Information Security Officer (64)", "Match_Reasoning": "Title: 'architect'", "null": [" Title: 'architecture'", " KSAT: 'architecture' (47x)", " KSAT: 'design' (20x)", " KSAT: 'solution' (7x)"]}, {"OPM-ID": "652", "NCWF_Title": "Cybersecurity Architecture", "NCWF_Category_Canonical": "DD", "NCWF_Category_Altern": "IO", "DCWF_Title": "Security Architect", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_Score": "312", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'architect'", "null": [" Title: 'security architect'", " Title: 'architecture'", " KSAT: 'architecture' (50x)", " KSAT: 'design' (40x)"]}, {"OPM-ID": "653", "NCWF_Title": "Data Architure", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "DD", "DCWF_Title": "Data Architect", "DCWF_Community": "DA", "Business_Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_Score": "70", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'architect'"}, {"OPM-ID": "661", "NCWF_Title": "Technology Research and Development", "NCWF_Category_Canonical": "DD", "NCWF_Category_Altern": "PD", "DCWF_Title": "Research & Development Specialist", "DCWF_Community": "IT", "Business_Primary_ECSF_Profile": "Cybersecurity Researcher", "Primary_ECSF_Profile": "Cybersecurity Researcher", "Primary_Score": "56", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Implementer (50)", "Match_Reasoning": " Cybersecurity Architect (48)", "null": [" Chief Information Security Officer (36)", "Title: 'research'"]}, {"OPM-ID": "671", "NCWF_Title": "Systems Testing and Evaluation", "NCWF_Category_Canonical": "DD", "NCWF_Category_Altern": "PD", "DCWF_Title": "System Testing and Evaluation Specialist", "DCWF_Community": "IT", "Business_Primary_ECSF_Profile": "Penetration Tester", "Primary_ECSF_Profile": "Penetration Tester", "Primary_Score": "38", "Match_Confidence": "Medium", "Secondary_Profiles": "Cybersecurity Risk Manager (32)", "Match_Reasoning": " Cybersecurity Architect (30)", "null": [" Cybersecurity Auditor (30)", "KSAT: 'testing' (19x)"]}, {"OPM-ID": "672", "NCWF_Title": "AI Test & Evaluation", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "DD", "DCWF_Title": "AI Test & Evaluation Specialist", "DCWF_Community": "DA", "Business_Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_Score": "34", "Match_Confidence": "Medium", "Secondary_Profiles": "Cybersecurity Risk Manager (28)", "Match_Reasoning": " Penetration Tester (18)", "null": [" Cybersecurity Auditor (16)", "KSAT: 'solution' (13x)"]}, {"OPM-ID": "673", "NCWF_Title": "Software Test & Evaluation", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "IO", "DCWF_Title": "Software Test & Evaluation Specialist", "DCWF_Community": "SE", "Business_Primary_ECSF_Profile": "Penetration Tester", "Primary_ECSF_Profile": "Penetration Tester", "Primary_Score": "50", "Match_Confidence": "Medium", "Secondary_Profiles": "Cybersecurity Implementer (28)", "Match_Reasoning": " Cybersecurity Architect (24)", "null": [" Cybersecurity Auditor (16)", "KSAT: 'testing' (25x)"]}, {"OPM-ID": "711", "NCWF_Title": "Cybersecurity Curriculum Development", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "OG", "DCWF_Title": "Cyber Instructional Curriculum Developer", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Cybersecurity Educator", "Primary_ECSF_Profile": "Cybersecurity Educator", "Primary_Score": "98", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Implementer (64)", "Match_Reasoning": " Cyber Threat Intelligence Specialist (62)", "null": [" Cybersecurity Risk Manager (32)", "Title: 'curriculum'", " KSAT: 'training' (26x)", " KSAT: 'curriculum' (7x)"]}, {"OPM-ID": "712", "NCWF_Title": "Cybersecurity Instruction", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "OG", "DCWF_Title": "Cyber Instructor", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Cybersecurity Educator", "Primary_ECSF_Profile": "Cybersecurity Educator", "Primary_Score": "190", "Match_Confidence": "High", "Secondary_Profiles": "Cyber Threat Intelligence Specialist (76)", "Match_Reasoning": "Title: 'instructor'", "null": [" KSAT: 'education' (9x)", " KSAT: 'training' (41x)", " KSAT: 'awareness' (13x)", " KSAT: 'curriculum' (6x)"]}, {"OPM-ID": "722", "NCWF_Title": "Systems Security Management", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "PD", "DCWF_Title": "Information Systems Security Manager", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_Score": "136", "Match_Confidence": "High", "Secondary_Profiles": "Chief Information Security Officer (126)", "Match_Reasoning": " Cyber Incident Responder (66)", "null": [" Cyber Legal, Policy & Compliance Officer (58)", "KSAT: 'risk' (41x)", " KSAT: 'threat' (13x)"]}, {"OPM-ID": "731", "NCWF_Title": "Cybersecurity Legal Advice", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "OG", "DCWF_Title": "Cyber Legal Advisor", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Cyber Legal, Policy & Compliance Officer", "Primary_ECSF_Profile": "Cyber Legal, Policy & Compliance Officer", "Primary_Score": "150", "Match_Confidence": "High", "Secondary_Profiles": "Chief Information Security Officer (64)", "Match_Reasoning": "Title: 'legal'", "null": [" KSAT: 'legal' (11x)", " KSAT: 'regulation' (22x)", " KSAT: 'privacy' (6x)", " KSAT: 'policy' (6x)"]}, {"OPM-ID": "732", "NCWF_Title": "Privacy Compliance", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "OG", "DCWF_Title": "Privacy Compliance Manager", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Cyber Legal, Policy & Compliance Officer", "Primary_ECSF_Profile": "Cyber Legal, Policy & Compliance Officer", "Primary_Score": "436", "Match_Confidence": "High", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'compliance'", "null": [" Title: 'privacy'", " KSAT: 'compliance' (27x)", " KSAT: 'legal' (19x)", " KSAT: 'regulation' (16x)"]}, {"OPM-ID": "752", "NCWF_Title": "Cybersecurity Policy and Planning", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "OG", "DCWF_Title": "Cyber Policy and Strategy Planner", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Cyber Legal, Policy & Compliance Officer", "Primary_ECSF_Profile": "Cyber Legal, Policy & Compliance Officer", "Primary_Score": "72", "Match_Confidence": "High", "Secondary_Profiles": "Chief Information Security Officer (62)", "Match_Reasoning": "Title: 'policy'", "null": [" KSAT: 'regulation' (7x)", " KSAT: 'policy' (15x)"]}, {"OPM-ID": "753", "NCWF_Title": "AI Adoption", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "PD", "DCWF_Title": "AI Adoption Specialist", "DCWF_Community": "DA", "Business_Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_ECSF_Profile": "Cybersecurity Architect", "Primary_Score": "26", "Match_Confidence": "Medium", "Secondary_Profiles": "Cybersecurity Educator (16)", "Match_Reasoning": " Chief Information Security Officer (10)", "null": [" Cybersecurity Risk Manager (10)", "KSAT: 'solution' (10x)"]}, {"OPM-ID": "801", "NCWF_Title": "Program Management", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "OG", "DCWF_Title": "Program Manager", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "86", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (80)", "Match_Reasoning": " Cyber Legal, Policy & Compliance Officer (28)", "null": ["Title: 'management'", " KSAT: 'management' (31x)"]}, {"OPM-ID": "802", "NCWF_Title": "Secure Project Management", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "OG", "DCWF_Title": "IT Project Manager", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "82", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (80)", "Match_Reasoning": " Cyber Threat Intelligence Specialist (30)", "null": [" Cyber Legal, Policy & Compliance Officer (28)", "Title: 'management'", " KSAT: 'management' (31x)"]}, {"OPM-ID": "803", "NCWF_Title": "Product Support Management", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "PD", "DCWF_Title": "Product Support Manager", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_Score": "80", "Match_Confidence": "High", "Secondary_Profiles": "Chief Information Security Officer (78)", "Match_Reasoning": " Cyber Legal, Policy & Compliance Officer (30)", "null": [" Cyber Threat Intelligence Specialist (28)", "KSAT: 'risk' (31x)"]}, {"OPM-ID": "804", "NCWF_Title": "Technology Portfolio Management", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "PD", "DCWF_Title": "IT Investment/Portfolio Manager", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_Score": "50", "Match_Confidence": "Medium", "Secondary_Profiles": "Chief Information Security Officer (48)", "Match_Reasoning": " Cyber Legal, Policy & Compliance Officer (16)", "null": [" Cybersecurity Auditor (16)", "KSAT: 'risk' (17x)"]}, {"OPM-ID": "805", "NCWF_Title": "Technology Program Auditing", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "PD", "DCWF_Title": "IT Program Auditor", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Cybersecurity Auditor", "Primary_ECSF_Profile": "Cybersecurity Auditor", "Primary_Score": "124", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (56)", "Match_Reasoning": " Chief Information Security Officer (48)", "null": ["Title: 'auditor'", " Title: 'audit'", " KSAT: 'audit' (8x)"]}, {"OPM-ID": "806", "NCWF_Title": "Product Management", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "OG", "DCWF_Title": "Product Manager", "DCWF_Community": "SE", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "28", "Match_Confidence": "Medium", "Secondary_Profiles": "Cybersecurity Architect (14)", "Match_Reasoning": " Cybersecurity Risk Manager (14)", "null": [" Cybersecurity Implementer (12)", "Title: 'management'", " KSAT: 'management' (7x)"]}, {"OPM-ID": "901", "NCWF_Title": "Executive Cybersecurity Leadership", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "PD", "DCWF_Title": "Executive Cyber Leader", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_Score": "110", "Match_Confidence": "High", "Secondary_Profiles": "Chief Information Security Officer (108)", "Match_Reasoning": " Cyber Legal, Policy & Compliance Officer (68)", "null": ["KSAT: 'risk' (29x)", " KSAT: 'assessment' (8x)", " KSAT: 'threat' (11x)"]}, {"OPM-ID": "902", "NCWF_Title": "AI Innovation Leadship", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "DD", "DCWF_Title": "AI Innovation Leader", "DCWF_Community": "DA", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "36", "Match_Confidence": "Medium", "Secondary_Profiles": "Cybersecurity Risk Manager (28)", "Match_Reasoning": " Cybersecurity Architect (22)", "null": [" Cybersecurity Researcher (18)", "KSAT: 'organizational' (8x)"]}, {"OPM-ID": "903", "NCWF_Title": "Data Governance", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "IO", "DCWF_Title": "Data Officer", "DCWF_Community": "DA", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "42", "Match_Confidence": "Medium", "Secondary_Profiles": "", "Match_Reasoning": "Title: 'governance'", "null": [" KSAT: 'management' (9x)"]}, {"OPM-ID": "TBD-A", "NCWF_Title": "Insider Threat Analysis", "NCWF_Category_Canonical": "PD", "NCWF_Category_Altern": "PD", "DCWF_Title": "Insider Threat Analyst", "DCWF_Community": "Cx", "Business_Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_ECSF_Profile": "Cyber Threat Intelligence Specialist", "Primary_Score": "172", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (126)", "Match_Reasoning": "Title: 'threat analyst'", "null": [" Title: 'analysis'", " KSAT: 'intelligence' (7x)", " KSAT: 'threat' (37x)", " KSAT: 'analysis' (12x)"]}, {"OPM-ID": "TBD-B", "NCWF_Title": "Operational Technology (OT) Cybersecurity Engineering", "NCWF_Category_Canonical": "DD", "NCWF_Category_Altern": "IO", "DCWF_Title": "Operational Technology (OT) Cybersecurity Engineer", "DCWF_Community": "Cx", "Business_Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_ECSF_Profile": "Cybersecurity Implementer", "Primary_Score": "74", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (50)", "Match_Reasoning": " Chief Information Security Officer (42)", "null": [" Cyber Legal, Policy & Compliance Officer (26)", "Title: 'engineer'"]}, {"OPM-ID": "723", "NCWF_Title": "Communications Security (COMSEC) Management", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "OG", "DCWF_Title": "COMSEC Manager", "DCWF_Community": "CS", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "58", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Risk Manager (42)", "Match_Reasoning": "Title: 'management'", "null": [" KSAT: 'management' (18x)"]}, {"OPM-ID": "733", "NCWF_Title": "AI Risk and Ethics", "NCWF_Category_Canonical": "N/A", "NCWF_Category_Altern": "PD", "DCWF_Title": "AI Risk and Ethics Specialist", "DCWF_Community": "DA", "Business_Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_ECSF_Profile": "Cybersecurity Risk Manager", "Primary_Score": "88", "Match_Confidence": "High", "Secondary_Profiles": "Cyber Legal, Policy & Compliance Officer (64)", "Match_Reasoning": "Title: 'risk'", "null": [" KSAT: 'risk' (22x)", " KSAT: 'ethics' (8x)", " KSAT: 'compliance' (12x)"]}, {"OPM-ID": "751", "NCWF_Title": "Cybersecurity Workforce Management", "NCWF_Category_Canonical": "OG", "NCWF_Category_Altern": "OG", "DCWF_Title": "Cyber Workforce Developer and Manager", "DCWF_Community": "EN", "Business_Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_ECSF_Profile": "Chief Information Security Officer", "Primary_Score": "72", "Match_Confidence": "High", "Secondary_Profiles": "Cybersecurity Educator (56)", "Match_Reasoning": "Title: 'management'", "null": [" KSAT: 'management' (24x)", " KSAT: 'training' (12x)"]}
];

        const getCategoryClass = (cat) => {
            if (!cat || cat === 'N/A') return 'cat-na';
            const c = cat.toUpperCase();
            if (c.includes('PD')) return 'cat-pd';
            if (c.includes('DD')) return 'cat-dd';
            if (c.includes('IN')) return 'cat-in';
            if (c.includes('OG')) return 'cat-og';
            if (c.includes('IO')) return 'cat-io';
            if (c.includes('CE')) return 'cat-ce';
            if (c.includes('CI')) return 'cat-ci';
            return 'cat-na';
        };

        const getCategoryImage = (cat) => {
            if (!cat || cat === 'N/A') return null;
            const c = cat.toUpperCase();
            if (c.includes('PD')) return 'PD.png';
            if (c.includes('DD')) return 'DD.png';
            if (c.includes('IN')) return 'IN.png';
            if (c.includes('OG')) return 'OG.png';
            if (c.includes('IO')) return 'IO.png';
            if (c.includes('CE')) return 'CE.png';
            if (c.includes('CI')) return 'CI.png';
            return null;
        };

        const getConfidenceFromScore = (score) => {
            const s = parseInt(score) || 0;
            if (s >= 80) return 'High';
            if (s >= 40) return 'Medium';
            return 'Low';
        };

        const parseSecondaryProfiles = (secondaryStr) => {
            if (!secondaryStr || secondaryStr.trim() === '') return [];
            const items = secondaryStr.split(';').map(s => s.trim()).filter(s => s);
            return items.map(item => {
                const match = item.match(/^(.*?)\s*\((\d+)\)$/);
                if (match) {
                    const score = match[2];
                    const confidence = getConfidenceFromScore(score);
                    return { name: match[1], score: score, confidence: confidence };
                }
                return { name: item, score: '‚Äî', confidence: 'Low' };
            });
        };

        const renderWorkrole = (wr) => {
            const catCanonical = wr['NCWF_Category_Canonical'] || 'N/A';
            const catAltern = wr['NCWF_Category_Altern'] || 'N/A';
            const secondaryProfiles = parseSecondaryProfiles(wr['Secondary_Profiles']);
            const confidence = (wr['Match_Confidence'] || 'Low').toLowerCase();

            return `
                <div class="workrole-card">
                    <div class="card-header">
                        <div class="header-left">
                            <span class="opm-id">OPM-ID: ${wr['OPM-ID']}</span>
                            <span class="header-title">${wr['NCWF_Title']}</span>
                        </div>
                        <div class="header-right">
                            <span class="score-badge">Score: ${wr['Primary_Score']}</span>
                            <span class="confidence-badge confidence-${confidence}">${wr['Match_Confidence']}</span>
                        </div>
                    </div>

                    <div class="info-grid">
                        <div class="grid-cell">
                            <div class="cell-label">DCWF Title</div>
                            <div class="cell-value">${wr['DCWF_Title']}</div>
                        </div>
                        <div class="grid-cell">
                            <div class="cell-label">NCWF Title</div>
                            <div class="cell-value">${wr['NCWF_Title']}</div>
                        </div>
                        <div class="grid-cell">
                            <div class="cell-label">DCWF Community</div>
                            <div class="cell-value">${wr['DCWF_Community']}</div>
                        </div>
                        <div class="grid-cell">
                            <div class="cell-label">NCWF Category (Canonical)</div>
                            <div class="cell-value" style="display: flex; align-items: center; justify-content: space-between;">
                                <span class="category-badge ${getCategoryClass(catCanonical)}">${catCanonical}</span>
                                ${getCategoryImage(catCanonical) ? `<img src="${getCategoryImage(catCanonical)}" alt="${catCanonical}" style="height: 40px; margin-left: auto;">` : ''}
                            </div>
                        </div>
                        <div class="grid-cell empty"></div>
                        <div class="grid-cell">
                            <div class="cell-label">NCWF Category (Alternative)</div>
                            <div class="cell-value" style="display: flex; align-items: center; justify-content: space-between;">
                                <span class="category-badge ${getCategoryClass(catAltern)}">${catAltern}</span>
                                ${getCategoryImage(catAltern) ? `<img src="${getCategoryImage(catAltern)}" alt="${catAltern}" style="height: 40px; margin-left: auto;">` : ''}
                            </div>
                        </div>
                    </div>

                    <div class="profiles-section">
                        <div class="primary-profile-box">
                            <div class="profile-label">üéØ Profil ECSF Primaire</div>
                            <div class="profile-name-score">${wr['Business_Primary_ECSF_Profile']} (${wr['Primary_Score']} - ${wr['Match_Confidence']})</div>
                        </div>

                        ${secondaryProfiles.length > 0 ? `
                            <div>
                                <div class="secondary-title">üìå Profils secondaires:</div>
                                <div class="secondary-list">
                                    ${secondaryProfiles.map(p => `
                                        <div class="secondary-item">
                                            <span class="secondary-name">${p.name}</span>
                                            <span class="secondary-score">(${p.score} - ${p.confidence})</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        };

        // Grouper les work roles par DCWF Community
        const groupByDCWFCommunity = (workroles) => {
            const grouped = {};
            workroles.forEach(wr => {
                const community = wr['DCWF_Community'] || 'N/A';
                if (!grouped[community]) {
                    grouped[community] = [];
                }
                grouped[community].push(wr);
            });
            // Trier chaque groupe par OPM-ID
            Object.keys(grouped).forEach(community => {
                grouped[community].sort((a, b) => {
                    const idA = a['OPM-ID'].replace(/[^0-9]/g, '');
                    const idB = b['OPM-ID'].replace(/[^0-9]/g, '');
                    return parseInt(idA) - parseInt(idB);
                });
            });
            return grouped;
        };

        // Cr√©er la sidebar
        const createSidebar = () => {
            const sidebarContainer = document.getElementById('sidebarContainer');
            const grouped = groupByDCWFCommunity(allWorkroles);
            
            // Ordre sp√©cifique des cat√©gories
            const categoryOrder = ['IT', 'CS', 'EN', 'CE', 'CI', 'DA', 'SE'];
            const otherCategories = Object.keys(grouped).filter(cat => !categoryOrder.includes(cat)).sort();
            const orderedCommunities = [...categoryOrder.filter(cat => grouped[cat]), ...otherCategories];
            
            let html = `
                <button class="workrole-btn" id="allWorkrolesBtn" style="margin-bottom: 20px; font-weight: 600;">
                    üìã Tous les work roles (${allWorkroles.length})
                </button>
            `;
            
            orderedCommunities.forEach(community => {
                const workroles = grouped[community];
                html += `
                    <div class="category-section">
                        <div class="category-title">${community} (${workroles.length})</div>
                        ${workroles.map(wr => {
                            const catCanonical = wr['NCWF_Category_Canonical'] || 'N/A';
                            const categoryImage = getCategoryImage(catCanonical);
                            return `
                            <button class="workrole-btn" data-opm-id="${wr['OPM-ID']}">
                                <span class="opm-id">${wr['OPM-ID']}</span>
                                <span class="workrole-title">${wr['NCWF_Title']}</span>
                                ${categoryImage ? `<img src="${categoryImage}" alt="${catCanonical}" style="height: 28px; margin-left: auto; flex-shrink: 0;">` : ''}
                            </button>
                        `;
                        }).join('')}
                    </div>
                `;
            });
            sidebarContainer.innerHTML = html;

            // Bouton "Tous"
            document.getElementById('allWorkrolesBtn').addEventListener('click', () => {
                document.querySelectorAll('.workrole-btn').forEach(b => b.classList.remove('active'));
                document.getElementById('allWorkrolesBtn').classList.add('active');
                renderAll(allWorkroles);
                document.getElementById('searchInput').value = '';
            });

            // Ajouter les event listeners pour les boutons individuels
            document.querySelectorAll('.workrole-btn[data-opm-id]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.workrole-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    const opmId = btn.dataset.opmId;
                    const selected = allWorkroles.filter(wr => wr['OPM-ID'] === opmId);
                    renderAll(selected);
                    // R√©initialiser la recherche
                    document.getElementById('searchInput').value = '';
                });
            });
        };

        const renderAll = (workroles) => {
            const container = document.getElementById('workrolesContainer');
            const resultCount = document.getElementById('resultCount');
            const emptyState = document.getElementById('emptyState');

            if (workroles.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
                resultCount.textContent = '';
            } else {
                emptyState.style.display = 'none';
                container.innerHTML = workroles.map(wr => renderWorkrole(wr)).join('');
                resultCount.textContent = `üìä ${workroles.length} work role(s) trouv√©(s)`;
            }
        };

        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase().trim();
            // D√©sactiver le bouton actif dans la sidebar
            document.querySelectorAll('.workrole-btn').forEach(b => b.classList.remove('active'));
            
            const filtered = allWorkroles.filter(wr => {
                const opmMatch = wr['OPM-ID'].toLowerCase().includes(query);
                const titleMatch = wr['NCWF_Title'].toLowerCase().includes(query);
                const dcwfMatch = wr['DCWF_Title'].toLowerCase().includes(query);
                return opmMatch || titleMatch || dcwfMatch;
            });
            renderAll(filtered);
        });

        // Gestion du zoom des images
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        const closeBtn = document.querySelector('.image-modal-close');
        const images = document.querySelectorAll('.zoomable-image');

        images.forEach(img => {
            img.addEventListener('click', () => {
                modal.classList.add('active');
                modalImg.src = img.src;
                modalImg.alt = img.alt;
                document.body.style.overflow = 'hidden'; // Emp√™cher le scroll
            });
        });

        // Fermer la modal
        closeBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            modal.classList.remove('active');
            document.body.style.overflow = ''; // R√©activer le scroll
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.remove('active');
                document.body.style.overflow = ''; // R√©activer le scroll
            }
        });

        // Fermer avec la touche Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('active')) {
                modal.classList.remove('active');
                document.body.style.overflow = ''; // R√©activer le scroll
            }
        });

        // Initialiser
        createSidebar();
        renderAll(allWorkroles);
    </script>
</body>
</html>